% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/read_data.R
\name{normalize_ojv}
\alias{normalize_ojv}
\title{Normalize OJV data from ZIP files}
\usage{
normalize_ojv(path, years = NULL, months = NULL, verbose = TRUE)
}
\arguments{
\item{path}{Character scalar. Directory containing the ZIP files.}

\item{years}{Integer vector of years to include, or \code{NULL}
(default) for all available years. Passed to \code{\link{read_ojv_zip}}.}

\item{months}{Integer vector of months to include, or \code{NULL}
(default) for all available months. Passed to \code{\link{read_ojv_zip}}.}

\item{verbose}{Logical scalar. If \code{TRUE} (default), prints
progress messages to the console.}
}
\value{
A named list with three \code{data.table} elements, all keyed
on \code{general_id}:
\describe{
\item{postings}{Deduplicated job posting metadata (one row per
\code{general_id}).}
\item{skills}{Skill-level data, filtered to \code{general_id}
values present in \code{postings}.}
\item{companies}{Company name data from postings_raw, filtered to
\code{general_id} values present in \code{postings}.}
}
}
\description{
Reads all three OJV file types (postings, skills, postings_raw) from a
directory of ZIP files, deduplicates postings to one row per
\code{general_id}, and ensures referential integrity across tables.
}
\details{
Deduplication keeps the most recent observation per \code{general_id},
determined by \code{year_grab_date} and \code{month_grab_date} columns
(descending sort). If these columns are absent, the first occurrence is
kept.
}
\examples{
\dontrun{
ojv <- normalize_ojv("/path/to/zip/dir")
ojv$postings
ojv$skills
ojv$companies

# Filter to 2024 data only
ojv24 <- normalize_ojv("/path/to/zip/dir", years = 2024L)
}
}
