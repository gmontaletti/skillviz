% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/read_data.R
\name{read_ojv_zip}
\alias{read_ojv_zip}
\title{Read OJV data from ZIP files}
\usage{
read_ojv_zip(
  path,
  type = c("postings", "skills", "postings_raw"),
  years = NULL,
  months = NULL,
  select = NULL,
  nrows = Inf,
  verbose = TRUE
)
}
\arguments{
\item{path}{Character scalar. Directory containing the ZIP files.}

\item{type}{Character scalar. File type to read: one of
\code{"postings"}, \code{"skills"}, or \code{"postings_raw"}.
Defaults to \code{"postings"}.}

\item{years}{Integer vector of years to include, or \code{NULL}
(default) for all available years.}

\item{months}{Integer vector of months to include, or \code{NULL}
(default) for all available months.}

\item{select}{Character vector of column names to read, passed to
\code{\link[data.table]{fread}}'s \code{select} argument.
\code{NULL} (default) reads all columns.}

\item{nrows}{Numeric scalar. Maximum number of rows to read per
file, passed to \code{\link[data.table]{fread}}'s \code{nrows}
argument. Default \code{Inf} reads all rows.}

\item{verbose}{Logical scalar. If \code{TRUE} (default), prints
progress messages to the console.}
}
\value{
A \code{data.table} containing the row-bound contents of
all matching ZIP files. Returns an empty \code{data.table} if no
matching files are found.
}
\description{
Reads Online Job Vacancy (OJV) data from a directory of ZIP files
following the ITC4 naming convention. Each ZIP file contains a single
CSV that is read directly via piped \code{unzip -p} without extracting
to disk.
}
\details{
ZIP files are expected to follow the naming pattern
\code{ITC4_{year}_{month}_{type}.zip} where \code{type} is one of
\code{"postings"}, \code{"skills"}, or \code{"postings_raw"}.

The function uses \code{data.table::fread()} with the \code{cmd}
argument to pipe \code{unzip -p} output directly, avoiding temporary
file extraction. This is efficient for large CSV files compressed
inside ZIP archives.

The three file types correspond to different OJV datasets:
\describe{
\item{postings}{Job posting metadata including location, contract,
education, sector, salary, and occupation classification columns.}
\item{skills}{Skill-level data linked to postings via
\code{general_id}, including ESCO skill taxonomy fields.}
\item{postings_raw}{Minimal posting data with company name.}
}
}
\examples{
\dontrun{
# Read all postings data
dt <- read_ojv_zip("/path/to/zip/dir", type = "postings")

# Read skills for 2023, months 1-6, selected columns only
sk <- read_ojv_zip(
  "/path/to/zip/dir",
  type = "skills",
  years = 2023L,
  months = 1:6,
  select = c("general_id", "ESCOSKILL_LEVEL_3", "ESCO_V0101_REUSETYPE")
)

# Read first 1000 rows per file for exploration
sample <- read_ojv_zip("/path/to/zip/dir", type = "postings", nrows = 1000)
}
}
