% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/crosswalk.R
\name{prepare_annunci_geography}
\alias{prepare_annunci_geography}
\title{Prepare announcements with CPI geographic dimension}
\usage{
prepare_annunci_geography(ann, esco_mapping, territoriale, regione = 10L)
}
\arguments{
\item{ann}{A data.table of announcements with columns
\code{idesco_level_4}, \code{idcity}, \code{general_id}, and year/month/day
grab and expire date columns.}

\item{esco_mapping}{A data.table from \code{\link[=read_esco_mapping]{read_esco_mapping()}},
containing at least \code{idesco_level_4} and \code{esco_level_4}.}

\item{territoriale}{A data.table with territorial classification.
Must contain \code{COD_ISTAT}, \code{CPI}, and \code{COD_REGIONE_PAUT}.}

\item{regione}{Integer region code to filter the territorial
table. Defaults to \code{10L}.}
}
\value{
A data.table with columns \code{CPI}, \code{it_esco_level_4},
\code{year_grab_date}, and \code{N} (unique announcement count), filtered
to complete cases and ordered by CPI, year, descending N.
}
\description{
Merges announcements with ESCO labels and a territorial mapping
table to add the CPI (Centro per l'Impiego) field, then
aggregates unique announcement counts by CPI, profession, and
year.
}
